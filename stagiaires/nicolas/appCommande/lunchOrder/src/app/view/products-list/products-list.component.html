<app-nav-bar></app-nav-bar>
<h1>{{provider?.name}}</h1>

<button *ngIf='currentUser?.isAdmin' routerLink='/modifyProduct/new/{{provider?.id}}'>Ajouter un nouveau produit</button>
 
<ul>
    <li class='productItem' *ngFor='let product of productList'>
        
        <h2>{{product?.name}}</h2>
        
        <button *ngIf='currentUser?.isAdmin'  class='productMenu' mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
            <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
            
            <button mat-menu-item  routerLink="/modifyProduct/{{product.id}}">Modifier ce produit</button>

            <button mat-menu-item (click)='onDeleteProductClick(product.id)'>Supprimer ce produit</button>

         </mat-menu>
          
        <hr>
        <span>Détails :</span>
        <p>{{product?.description}}</p>
        <span>Prix : {{product?.price}} €</span>
        <h4>Suppléments</h4>


            <mat-checkbox >
              Suppléments
            </mat-checkbox>

            <ul>
              <li *ngFor='let option of product.options'>
                <mat-checkbox>
                    {{option.nom}} +{{option.surcout}} €
                </mat-checkbox>
              </li>
            </ul>
        
        <div>
            
            <button [disabled]='!currentUser' (click)='openOrderDialog(product)'>Commander!</button>
            <br>
            <span *ngIf='!currentUser'>Vous devez être connecté pour passer commande</span>

        </div>

    </li>
</ul>