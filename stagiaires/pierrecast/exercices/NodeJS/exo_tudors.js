let arbre = [{
    "x": 2247,
    "y": 78,
    "id": "ff663b16-6d48-7712-412c-4f1df81eb15c",
    "name": "Catherine",
    "surname": "of Valois",
    "sex": "f",
    "description": "Princess of France\r\n1401 - 1437",
    "isNode": true,
    "relationships": [{
        "partnerId": "2279a9a9-fd2a-7d9f-2463-305f57faabd3",
        "direction": "to",
        "children": ["824fa647-8012-a425-5615-d30d9db62ca2"]
    }
                     ]
}, {
    "x": 2715,
    "y": 76,
    "id": "2279a9a9-fd2a-7d9f-2463-305f57faabd3",
    "name": "Owen",
    "surname": "Tudor",
    "sex": "m",
    "description": "executed 1461",
    "isNode": true,
    "relationships": [{
        "partnerId": "ff663b16-6d48-7712-412c-4f1df81eb15c",
        "direction": "from",
        "children": ["824fa647-8012-a425-5615-d30d9db62ca2"]
    }
                     ]
}, {
    "x": 2447,
    "y": 360,
    "id": "824fa647-8012-a425-5615-d30d9db62ca2",
    "name": "Edmund",
    "surname": "Tudor",
    "sex": "m",
    "description": "1430 - 1456",
    "isNode": true,
    "relationships": [{
        "partnerId": "f41170ee-0370-2ace-9876-22221fd11318",
        "direction": "from",
        "children": ["8d36d054-1a40-846b-8d2f-5e2c9dbe96b5"]
    }
                     ]
}, {
    "x": 1875,
    "y": 363,
    "id": "f41170ee-0370-2ace-9876-22221fd11318",
    "name": "Margaret",
    "surname": "Beaufort",
    "sex": "f",
    "description": "1433 - 1509",
    "isNode": true,
    "relationships": [{
        "partnerId": "824fa647-8012-a425-5615-d30d9db62ca2",
        "direction": "to",
        "children": ["8d36d054-1a40-846b-8d2f-5e2c9dbe96b5"]
    }
                     ]
}, {
    "x": 2003,
    "y": 557,
    "id": "8d36d054-1a40-846b-8d2f-5e2c9dbe96b5",
    "name": "Henry VII",
    "surname": "Tudor",
    "sex": "m",
    "description": "",
    "isNode": true,
    "relationships": [{
        "partnerId": "b0832ba2-be6d-c5f8-db77-1e572b8e841d",
        "direction": "from",
        "children": ["263446e2-6b35-7858-4692-bb19f6c0538e", "f2719f92-1421-a3c3-ff46-5ecba6e9ce27", "73c5743f-262a-b282-207c-48bd1531a8cb", "f20fd31c-a484-c559-b4b5-7b78f46114dc", "e4c663b5-e35f-3f48-58c0-d8b5d8b9adde", "d7333f8a-4c9c-26fd-f36a-ea7ce87bb89a"]
    }
                     ]
}, {
    "x": 1315,
    "y": 554,
    "id": "b0832ba2-be6d-c5f8-db77-1e572b8e841d",
    "name": "Elizabeth",
    "surname": "of York",
    "sex": "f",
    "description": "1466-1503",
    "isNode": true,
    "relationships": [{
        "partnerId": "8d36d054-1a40-846b-8d2f-5e2c9dbe96b5",
        "direction": "to",
        "children": ["263446e2-6b35-7858-4692-bb19f6c0538e", "f2719f92-1421-a3c3-ff46-5ecba6e9ce27", "73c5743f-262a-b282-207c-48bd1531a8cb", "f20fd31c-a484-c559-b4b5-7b78f46114dc", "e4c663b5-e35f-3f48-58c0-d8b5d8b9adde", "d7333f8a-4c9c-26fd-f36a-ea7ce87bb89a"]
    }
                     ]
}, {
    "x": 326,
    "y": 841,
    "id": "e4c663b5-e35f-3f48-58c0-d8b5d8b9adde",
    "name": "Margaret",
    "surname": "",
    "sex": "f",
    "description": "1489 - 1541",
    "isNode": true,
    "relationships": [{
        "partnerId": "cfb036b7-0fc8-db51-dd23-4d43da1c2241",
        "direction": "from",
        "children": ["c297929f-52a5-fa5c-88e4-97a4767cfdd7"]
    }
                     ]
}, {
    "x": 1045,
    "y": 853,
    "id": "73c5743f-262a-b282-207c-48bd1531a8cb",
    "name": "2 girls",
    "surname": "",
    "sex": "f",
    "description": "",
    "isNode": true
}, {
    "x": 733,
    "y": 859,
    "id": "f20fd31c-a484-c559-b4b5-7b78f46114dc",
    "name": "Edmund",
    "surname": "",
    "sex": "m",
    "description": "Duke of Somerset\r\n1499-1500",
    "isNode": true
}, {
    "x": 3208,
    "y": 822,
    "id": "f2719f92-1421-a3c3-ff46-5ecba6e9ce27",
    "name": "Mary",
    "surname": "",
    "sex": "f",
    "description": "1496 - 1533",
    "isNode": true,
    "relationships": [{
        "partnerId": "0989b27d-73c4-61b8-17fd-8743fa237d2d",
        "direction": "to",
        "children": ["112ad49e-15cf-018a-710e-3f18426deeb4", "7de6b9d4-461c-96ff-8048-cf1a1ea22ca0"]
    }
                     ]
}, {
    "x": 2307,
    "y": 856,
    "id": "263446e2-6b35-7858-4692-bb19f6c0538e",
    "name": "Arthur",
    "surname": "",
    "sex": "m",
    "description": "Prince of Wales\r\n1486 - 1502",
    "isNode": true,
    "relationships": [{
        "partnerId": "09e88b0c-43e9-362f-7182-ae5bfc33c5f5",
        "direction": "from",
        "children": []
    }
                     ]
}, {
    "x": 3597,
    "y": 826,
    "id": "0989b27d-73c4-61b8-17fd-8743fa237d2d",
    "name": "Charles",
    "surname": "Brandon",
    "sex": "m",
    "description": "Duk of Suffolk",
    "isNode": true,
    "relationships": [{
        "partnerId": "f2719f92-1421-a3c3-ff46-5ecba6e9ce27",
        "direction": "from",
        "children": ["112ad49e-15cf-018a-710e-3f18426deeb4", "7de6b9d4-461c-96ff-8048-cf1a1ea22ca0"]
    }
                     ]
}, {
    "x": 1469,
    "y": 365,
    "id": "d6e43c0f-c5bf-80c2-1f4a-5a380881ac02",
    "name": "Elizabeth",
    "surname": "Woodville",
    "sex": "f",
    "description": "1437 - 1492",
    "isNode": true,
    "relationships": [{
        "partnerId": "ba5eb4cb-7f0c-2de2-8080-4980983c1718",
        "direction": "from",
        "children": ["b0832ba2-be6d-c5f8-db77-1e572b8e841d"]
    }
                     ]
}, {
    "x": 947,
    "y": 362,
    "id": "ba5eb4cb-7f0c-2de2-8080-4980983c1718",
    "name": "Edward IV",
    "surname": "of York",
    "sex": "m",
    "description": "",
    "isNode": true,
    "relationships": [{
        "partnerId": "d6e43c0f-c5bf-80c2-1f4a-5a380881ac02",
        "direction": "to",
        "children": ["b0832ba2-be6d-c5f8-db77-1e572b8e841d"]
    }
                     ]
}, {
    "x": -722,
    "y": 854,
    "id": "cfb036b7-0fc8-db51-dd23-4d43da1c2241",
    "name": "James IV",
    "surname": "Stuart",
    "sex": "m",
    "description": "King of Scotland",
    "isNode": true,
    "relationships": [{
        "partnerId": "e4c663b5-e35f-3f48-58c0-d8b5d8b9adde",
        "direction": "to",
        "children": ["c297929f-52a5-fa5c-88e4-97a4767cfdd7"]
    }
                     ]
}, {
    "x": 2966,
    "y": 1053,
    "id": "112ad49e-15cf-018a-710e-3f18426deeb4",
    "name": "Frances",
    "surname": "",
    "sex": "f",
    "description": "1517 - 1559",
    "isNode": true,
    "relationships": [{
        "partnerId": "1aa7e170-9aa0-4487-6bca-f13528f6af17",
        "direction": "to",
        "children": ["e09cb737-1f7e-66da-c45b-30621d624b09", "e0fd6d8f-1859-3d41-9b28-f0f18a2d1060"]
    }
                     ]
}, {
    "x": 3705,
    "y": 1055,
    "id": "7de6b9d4-461c-96ff-8048-cf1a1ea22ca0",
    "name": "Others",
    "surname": "",
    "sex": "",
    "description": "",
    "isNode": true
}, {
    "x": 3362,
    "y": 1051,
    "id": "1aa7e170-9aa0-4487-6bca-f13528f6af17",
    "name": "Henry",
    "surname": "Grey",
    "sex": "m",
    "description": "Duke of Suffolk\r\n1517 - 1554 (executed)",
    "isNode": true,
    "relationships": [{
        "partnerId": "112ad49e-15cf-018a-710e-3f18426deeb4",
        "direction": "from",
        "children": ["e09cb737-1f7e-66da-c45b-30621d624b09", "e0fd6d8f-1859-3d41-9b28-f0f18a2d1060"]
    }
                     ]
}, {
    "x": 3035,
    "y": 1224,
    "id": "e0fd6d8f-1859-3d41-9b28-f0f18a2d1060",
    "name": "Jane",
    "surname": "Grey",
    "sex": "f",
    "description": "1537 - 1554 (executed)",
    "isNode": true
}, {
    "x": 3333,
    "y": 1238,
    "id": "e09cb737-1f7e-66da-c45b-30621d624b09",
    "name": "Others",
    "surname": "",
    "sex": "",
    "description": "",
    "isNode": true
}, {
    "x": 1523,
    "y": 861,
    "id": "d7333f8a-4c9c-26fd-f36a-ea7ce87bb89a",
    "name": "Henry VIII",
    "surname": "",
    "sex": "m",
    "description": "1491 - 1547",
    "isNode": true,
    "relationships": [{
        "partnerId": "2ade144b-94fe-ea27-04b8-e508ed6c0e1d",
        "direction": "from",
        "children": ["e2590e2e-8fa0-d72c-4db3-406cfe1c553c"]
    }, {
        "partnerId": "09e88b0c-43e9-362f-7182-ae5bfc33c5f5",
        "direction": "to",
        "children": ["3e44918e-592a-42e6-70f2-b7b53507b284", "a4d942aa-f8bc-2448-ddf4-9e44c4edd8ed"]
    }, {
        "partnerId": "81a1b719-d78d-5d35-4c18-aa2f86dd2936",
        "direction": "from",
        "children": []
    }, {
        "partnerId": "ef1f46b0-04cc-11a1-2185-bc787dd6cc3a",
        "direction": "from",
        "children": []
    }, {
        "partnerId": "d24251e7-fdf7-6f60-1a6f-ab1e7e6cdb46",
        "direction": "from",
        "children": []
    }, {
        "partnerId": "ff3731df-ed39-073b-bca3-235b62aaf595",
        "direction": "to",
        "children": ["72fa2fcf-e6bf-3109-34fb-7832e2271823", "a321371d-abfa-7684-d0b7-a61744bc81c3"]
    }
                     ]
}, {
    "x": 2401,
    "y": 1067,
    "id": "09e88b0c-43e9-362f-7182-ae5bfc33c5f5",
    "name": "Catherine",
    "surname": "of Aragon",
    "sex": "f",
    "description": "Princess of Spain\r\n1485 - 1536",
    "isNode": true,
    "relationships": [{
        "partnerId": "d7333f8a-4c9c-26fd-f36a-ea7ce87bb89a",
        "direction": "from",
        "children": ["3e44918e-592a-42e6-70f2-b7b53507b284", "a4d942aa-f8bc-2448-ddf4-9e44c4edd8ed"]
    }, {
        "partnerId": "263446e2-6b35-7858-4692-bb19f6c0538e",
        "direction": "to",
        "children": []
    }
                     ]
}, {
    "x": -319,
    "y": 1131,
    "id": "c297929f-52a5-fa5c-88e4-97a4767cfdd7",
    "name": "James V",
    "surname": "Stuart",
    "sex": "m",
    "description": "King of Scothland\r\n1512 - 1542",
    "isNode": true,
    "relationships": [{
        "partnerId": "d95c79cf-8966-395d-24b6-16b3cc33578f",
        "direction": "from",
        "children": ["403816cb-ced5-087d-4589-4c299f3ea9bf"]
    }
                     ]
}, {
    "x": 3002,
    "y": 1881,
    "id": "3e44918e-592a-42e6-70f2-b7b53507b284",
    "name": "Mary I",
    "surname": "Bloody Mary",
    "sex": "f",
    "description": "1516 - 1558",
    "isNode": true,
    "relationships": [{
        "partnerId": "e93a2546-5ce6-a034-aa7f-88398d2c9b33",
        "direction": "to",
        "children": []
    }
                     ]
}, {
    "x": 3409,
    "y": 1878,
    "id": "e93a2546-5ce6-a034-aa7f-88398d2c9b33",
    "name": "Philip II",
    "surname": "of Hasburg",
    "sex": "m",
    "description": "King of Spain and Portugal\r\n1527 - 1598",
    "isNode": true,
    "relationships": [{
        "partnerId": "3e44918e-592a-42e6-70f2-b7b53507b284",
        "direction": "from",
        "children": []
    }
                     ]
}, {
    "x": 2713,
    "y": 1888,
    "id": "a4d942aa-f8bc-2448-ddf4-9e44c4edd8ed",
    "name": "Others",
    "surname": "",
    "sex": "",
    "description": "",
    "isNode": true
}, {
    "x": -760,
    "y": 1132,
    "id": "d95c79cf-8966-395d-24b6-16b3cc33578f",
    "name": "Mary",
    "surname": "of Guise",
    "sex": "f",
    "description": "1515 - 1560",
    "isNode": true,
    "relationships": [{
        "partnerId": "c297929f-52a5-fa5c-88e4-97a4767cfdd7",
        "direction": "to",
        "children": ["403816cb-ced5-087d-4589-4c299f3ea9bf"]
    }
                     ]
}, {
    "x": -641,
    "y": 1416,
    "id": "403816cb-ced5-087d-4589-4c299f3ea9bf",
    "name": "Mary",
    "surname": "Stuart",
    "sex": "f",
    "description": "Queen of Scotland\r\n1542 - 1587 (executed)",
    "isNode": true,
    "relationships": [{
        "partnerId": "02480c84-9f8d-2b13-8435-9e07eb54f50d",
        "direction": "to",
        "children": ["3b16e085-3347-de12-54a3-b3e6808ebd21"]
    }
                     ]
}, {
    "x": -242,
    "y": 1415,
    "id": "02480c84-9f8d-2b13-8435-9e07eb54f50d",
    "name": "Henry",
    "surname": "Stuart",
    "sex": "m",
    "description": "Lord Darnley\r\n1545 - 1567 (killed)",
    "isNode": true,
    "relationships": [{
        "partnerId": "403816cb-ced5-087d-4589-4c299f3ea9bf",
        "direction": "from",
        "children": ["3b16e085-3347-de12-54a3-b3e6808ebd21"]
    }
                     ]
}, {
    "x": -644,
    "y": 1650,
    "id": "3b16e085-3347-de12-54a3-b3e6808ebd21",
    "name": "James I",
    "surname": "Stuart",
    "sex": "m",
    "description": "James VI of Scothland",
    "isNode": true,
    "relationships": [{
        "partnerId": "ae5fe64f-bdca-c163-285b-61995b374435",
        "direction": "to",
        "children": []
    }
                     ]
}, {
    "x": -206,
    "y": 1647,
    "id": "ae5fe64f-bdca-c163-285b-61995b374435",
    "name": "Anne",
    "surname": "",
    "sex": "f",
    "description": "Princess of Denmark",
    "isNode": true,
    "relationships": [{
        "partnerId": "3b16e085-3347-de12-54a3-b3e6808ebd21",
        "direction": "from",
        "children": []
    }
                     ]
}, {
    "x": 1988,
    "y": 1318,
    "id": "ff3731df-ed39-073b-bca3-235b62aaf595",
    "name": "Anne",
    "surname": "Boleyn",
    "sex": "f",
    "description": "1502 - 1536 (executed)",
    "isNode": true,
    "relationships": [{
        "partnerId": "d7333f8a-4c9c-26fd-f36a-ea7ce87bb89a",
        "direction": "from",
        "children": ["72fa2fcf-e6bf-3109-34fb-7832e2271823", "a321371d-abfa-7684-d0b7-a61744bc81c3"]
    }
                     ]
}, {
    "x": 1826,
    "y": 1883,
    "id": "72fa2fcf-e6bf-3109-34fb-7832e2271823",
    "name": "Elizabeth I",
    "surname": "",
    "sex": "f",
    "description": "1533 - 1603",
    "isNode": true
}, {
    "x": 2122,
    "y": 1886,
    "id": "a321371d-abfa-7684-d0b7-a61744bc81c3",
    "name": "Others",
    "surname": "",
    "sex": "",
    "description": "",
    "isNode": true
}, {
    "x": 1204,
    "y": 1545,
    "id": "2ade144b-94fe-ea27-04b8-e508ed6c0e1d",
    "name": "Jane",
    "surname": "Seymour",
    "sex": "f",
    "description": "1509 - 1537",
    "isNode": true,
    "relationships": [{
        "partnerId": "d7333f8a-4c9c-26fd-f36a-ea7ce87bb89a",
        "direction": "to",
        "children": ["e2590e2e-8fa0-d72c-4db3-406cfe1c553c"]
    }
                     ]
}, {
    "x": 1546,
    "y": 1885,
    "id": "e2590e2e-8fa0-d72c-4db3-406cfe1c553c",
    "name": "Edward VI",
    "surname": "",
    "sex": "m",
    "description": "1537 - 1553",
    "isNode": true
}, {
    "x": 979,
    "y": 1109,
    "id": "81a1b719-d78d-5d35-4c18-aa2f86dd2936",
    "name": "Catherine",
    "surname": "Howard",
    "sex": "f",
    "description": "1525 - 1542",
    "isNode": true,
    "relationships": [{
        "partnerId": "d7333f8a-4c9c-26fd-f36a-ea7ce87bb89a",
        "direction": "to",
        "children": []
    }
                     ]
}, {
    "x": 884,
    "y": 1278,
    "id": "ef1f46b0-04cc-11a1-2185-bc787dd6cc3a",
    "name": "Anne",
    "surname": "of Clèves",
    "sex": "f",
    "description": "1509 - 1557",
    "isNode": true,
    "relationships": [{
        "partnerId": "d7333f8a-4c9c-26fd-f36a-ea7ce87bb89a",
        "direction": "to",
        "children": []
    }
                     ]
}, {
    "x": 900,
    "y": 1468,
    "id": "d24251e7-fdf7-6f60-1a6f-ab1e7e6cdb46",
    "name": "Catherine",
    "surname": "Parr",
    "sex": "f",
    "description": "1512 - 1548",
    "isNode": true,
    "relationships": [{
        "partnerId": "d7333f8a-4c9c-26fd-f36a-ea7ce87bb89a",
        "direction": "to",
        "children": []
    }
                     ]
}
           ];



// Ecrire une fonction qui renvoie un tableau avec le prenom de toutes les personnes dans cet arbre
function getFirstNames(arbre) {
    let names = [];
    for (let person of arbre) {
        names.push(person.name);
    }

    return names;
}

console.log(getFirstNames(arbre));

// Ecrire une fonction qui renvoie le nombre de femmes et d'hommes dans cet arbre
function getTotalSex(arbre) {
    let total = { male: 0 , female :0};
    for (let person of arbre) {
        (person.sex === 'f')? total.female++ : total.male++;        
    }
    return total;
}

console.log(getTotalSex(arbre));

// Ecrire une fonction qui prend un ID et renvoie l'objet de la personne correspondante

function getPersonFromID(arbre, id) {
    for (let person of arbre) {
        if (person.id === id) {
            return person;
        }     
    }
    return false;
}
console.log(getPersonFromID(arbre, '2ade144b-94fe-ea27-04b8-e508ed6c0e1d'));

// Ecrire une fonction qui prend un ID et renvoie les noms et prenoms de la personne

function getNamesFromID(arbre, id) {
    let person = getPersonFromID(arbre, id);

    return person.name+" "+person.surname;
}
console.log(getNamesFromID(arbre, '2ade144b-94fe-ea27-04b8-e508ed6c0e1d'));

// Ecrire une fonction qui renvoie le nom de toutes les femmes dans un arbre

function getFemaleTree(arbre) {
    let femaleTree = [];
    for (let person of arbre) {
        if (person.sex === 'f') {
            femaleTree.push(person);
        }      
    }

    return femaleTree;
}

console.log(getFemaleTree(arbre));

// Ecrire une fonction qui renvoie le nom complet de toues les personnes qui n'ont pas eu d'enfant
function getFemaleNoChildTree(arbre) {
    let femaleTree = getFemaleTree(arbre);
    for (let person of arbre) {
        if (getNumberOfChild(person) === 0) {
            femaleTree.push(person);
        }
    }

    return femaleTree;
}

function getNumberOfChild(person) {
    let nbChild = 0;
    if (person.relationships !== undefined) {
        for (let relation of person.relationships) {
            nbChild += relation.children.length;
        }
    }
    return nbChild;
}

console.log(getFemaleNoChildTree(arbre));

// Ecrire une fonction qui renvoie le nom complet (nom et prénom) de toutes les personnes qui ont eu au moins un enfant
function getParentTree(arbre) {
    let names = [];
    for (let person of arbre) {
        let nbChild = getNumberOfChild(person)

        if (nbChild > 0) {

            names.push(person.name+" "+person.surname);
        }
    }

    return names;
}

console.log(getParentTree(arbre));

// Ecrire une fonction qui renvoie les noms et prenoms et nombre d'enfants des personnes qui ont eu au moins un enfant.
function getParentWithNbChildTree(arbre) {
    let names = [];
    for (let person of arbre) {
        let nbChild = getNumberOfChild(person)

        if (nbChild > 0) {
            names.push(person.name+" "+person.surname+ " ("+nbChild+")");
        }
    }

    return names;
}

console.log(getParentWithNbChildTree(arbre));

// Ecrire une fonction qui renvoie tous les couples décrits dans cet arbre (BONUS : sans doublons).
function getAllCouples(arbre) {
    let femaleTree = getFemaleTree(arbre);
    let allCouples = [];
    for (let person of femaleTree) {
        allCouples.push([...getCouples(arbre, person)]);
    }

    return allCouples;
}

function getCouples(arbre, person) {
    let couples = [];
    
    if (person.relationships !== undefined) {
        for (let relation of person.relationships) {
            console.log(relation);
            if (relation.children !== [] && relation.children.length > 0) {
                couples.push(getNamesFromID(arbre, relation.partnerId)+" & "+getNamesFromID(arbre, person.id));
                
            }
        }
    }
    
    return couples; 
}
console.log('last');

console.log(getAllCouples(arbre));

// Ecrire une fonction qui renvoie, pour chaque personne qui a eu un enfant, un objet contenant : son nom, son prenom, un tableau contenant le nom de tous les enfants qu'il a eu
function getParentWithChildNamesTree(arbre) {
    let tree = [];
    for (let person of arbre) {
        let nbChild = getNumberOfChild(person)

        if (nbChild > 0) {
            let oPerson =  {
                name : person.name, 
                surname : person.surname,
                children : []
            }
            
            if (person.relationships !== undefined) {
                for (let relation of person.relationships) {
                    
                    if (relation.children !== []) {
                        for (let id of relation.children) {
                            let childName = getNamesFromID(arbre, id);
                            oPerson.children.push(childName);
                        }
                    }
                }
            }
            tree.push(oPerson);
        }
    }

    return tree;
}

//console.log(getParentWithChildNamesTree(arbre));